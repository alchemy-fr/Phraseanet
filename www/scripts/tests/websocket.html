<!doctype html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Mocha Spec Runner</title>
    <link rel="stylesheet" href="./../../../tmp-assets/mocha/mocha.css">
</head>
<body>
    <div id="mocha"></div>
    <script src="./../../../tmp-assets/mocha/mocha.js"></script>
    <script src="./../../../tmp-assets/sinonjs/sinon.js"></script>
    <script src="../../assets/requirejs/require.js"></script>
    <script>
        require.config({
            baseUrl: "../../scripts",
            paths: {
                "chai"    : "../../tmp-assets/chai/chai",
                "fixtures": "../../tmp-assets/js-fixtures/fixtures",
                "jquery": "../assets/jquery/jquery",
                "backbone": "../assets/backbone-amd/backbone",
                "i18n": "../assets/i18next/i18next.amd-1.6.3",
                "bootstrap": "../assets/bootstrap/js/bootstrap.min",
                "sinonchai": "../../tmp-assets/sinon-chai/lib/sinon-chai",
                "squire": "../../tmp-assets/squire/src/Squire",
                "jquery.ui": "../assets/jquery.ui/jquery-ui",
                "underscore": "../assets/underscore-amd/underscore",
                "jquery.ui.widget": "../assets/jquery-file-upload/jquery.ui.widget",
                "jquery.cookie": "../assets/jquery.cookie/jquery.cookie",
                "jquery.treeview": "../assets/jquery.treeview/jquery.treeview",
                "jquery.tooltip": "../assets/jquery.tooltip/jquery.tooltip",
                "blueimp.loadimage" : "../assets/blueimp-load-image/load-image",
                "jfu.iframe-transport": "../assets/jquery-file-upload/jquery.iframe-transport",
                "jfu.fileupload": "../assets/jquery-file-upload/jquery.fileupload"
            },
            shim: {
                "jquery.ui": {
                    deps: ["jquery"]
                },
                "jquery.treeview": {
                    deps: ['jquery', 'jquery.cookie'],
                    exports: '$.fn.treeview'
                },
                bootstrap:{
                    deps: ['jquery']
                },
                "jquery.cookie": {
                    deps: ["jquery"],
                    exports: '$.fn.cookie'
                },
                "jquery.tooltip": {
                    deps: ["jquery"],
                    exports: '$.fn.tooltip'
                },
                "jquery.ui": {
                    deps: ["jquery"]
                },
                "jquery.ui.widget": {
                    deps: ["jquery"]
                },
                "jfu.fileupload": {
                    deps: ["jquery.ui.widget"]
                }
            }
        });

        mocha.setup({
            ui: "bdd",
            ignoreLeaks: false,
            globals: ['ab']
        });

        console = window.console || function () {};

        window.notrack = true;

        window.runMocha = function () {
            if (window.mochaPhantomJS) {
                mochaPhantomJS.run();
            } else {
                mocha.run();
            }
        };
        require([
            'tests/specs/websockets/connection',
            'tests/specs/websockets/subscriberManager'
        ], window.runMocha);
    </script>
</body>
</html>
