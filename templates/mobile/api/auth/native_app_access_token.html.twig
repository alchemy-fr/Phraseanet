<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
    <head>
        <meta charset="utf-8" />
        <title>
        {% if error is defined %}
            {% trans 'Fail' %}
        {% else %}
            {% trans 'Success' %}
        {% endif %}
            </title>
        <meta name="author" content="Alchemy" />

        <!-- Mobile viewport optimized -->
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <!-- styles -->
        <link type="text/css" rel="stylesheet" href="{{ path('minifier', { 'f' : 'skins/build/bootstrap.css' }) }}" />
        <link type="text/css" rel="stylesheet" href="{{ path('minifier', { 'f' : 'skins/build/bootstrap-responsive.css' }) }}" />
        <link rel="stylesheet" type="text/css" href="{{ path('minifier', { 'f' : 'skins/oauth/default.css' }) }}" />

        <!-- All JavaScript at the bottom, except this Modernizr build.
        Modernizr enables HTML5 elements & feature detects for optimal performance. -->
        <script type="text/javascript" src="{{ path('minifier', { 'f' : 'assets/modernizr/modernizr.js' }) }}"></script>

        <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
        <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
    </head>

    <body>
        <div id="page" class="container">
            <div id="main" class="row">

                <div id="title-box" class="span6 offset3">
                    <h1 id="namePhr">{{ app['phraseanet.registry'].get('GV_homeTitle') }}</h1>
                </div>

                {% if app['authentication'].getUser() is not none %}
                    {% set username = '<b>' ~ app['authentication'].getUser().get_display_name() ~ '</b>' %}
                    <div id="hello-box" class="span6 offset3">
                        <p class="login_hello">
                            {% trans %}
                            Hello {{username}}
                            {% endtrans %}
                        </p>
                    </div>
                {% endif %}
                <div id="text-box" class="span6 offset3">
                    {% if error is defined %}
                        <div id="top-text-box">
                            <h4>{% trans %}Erreur{% endtrans %}</h4>
                        </div>
                        <div id="main-text-box">
                            <p>
                                {% trans %}
                                {{error}}
                                {% endtrans %}
                            </p>
                            <input type="text" class="input-large" name="access_token" value="{{token.access_token}}" size="{{token.access_token|length}}"/>
                        </div>
                    {% else %}
                        <div id="top-text-box">
                            <h4>{% trans %}Code d'acces{% endtrans %}</h4>
                        </div>
                        <div id="main-text-box">
                            <p>
                                {% trans %}
                                Copiez le code ci-dessous, retournez dans votre application et collez-le &agrave l'endroit requis :
                                {% endtrans %}
                            </p>
                            <input type="text" class="input-large" name="access_token" value="{{token.access_token}}" size="{{token.access_token|length}}"/>
                        </div>
                    {% endif %}
                </div>
                <p> </p>

            </div>
        </div>

        <script type="text/javascript" src="{{ path('minifier', { 'f' : 'assets/jquery/jquery.js' }) }}"></script>
        <script type="text/javascript" src="{{ path('minifier', { 'g' : 'bootstrap_js' }) }}"></script>
    </body>
</html>
